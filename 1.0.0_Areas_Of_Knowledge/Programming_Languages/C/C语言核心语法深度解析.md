# C语言核心语法深度解析

## 目录

1.  [C程序的基本结构](#1-c程序的基本结构)
    *   [预处理器指令](#预处理器指令)
    *   [main函数](#main函数)
    *   [代码块](#代码块)
    *   [语句终结符](#语句终结符)
2.  [注释的艺术](#2-注释的艺术)
3.  [变量：数据的容器](#3-变量声明与初始化)
    *   [声明与赋值](#声明与赋值)
    *   [命名规则与最佳实践](#命名规则与最佳实践)
4.  [常量：不变的价值](#4-常量)
    *   [`const` 关键字](#const-关键字)
    *   [`#define` 预处理器指令](#define-预处理器指令)
5.  [基本数据类型详解](#5-基本数据类型)
    *   [整型 (`int`, `short`, `long`, `long long`)](#整型-int-short-long-long-long)
    *   [浮点型 (`float`, `double`, `long double`)](#浮点型-float-double-long-double)
    *   [字符型 (`char`)](#字符型-char)
    *   [布尔类型 (`_Bool`)](#布尔类型-_bool)
    *   [无符号类型 (`unsigned`)](#无符号类型-unsigned)
    *   [数据类型选择建议](#数据类型选择建议)
6.  [C语言运算符全览](#6-运算符)
    *   [算术运算符](#算术运算符)
    *   [关系运算符](#关系运算符)
    *   [逻辑运算符](#逻辑运算符)
    *   [赋值运算符](#赋值运算符)
    *   [自增/自减运算符](#自增自减运算符)
    *   [位运算符](#位运算符)
    *   [`sizeof` 运算符](#sizeof-运算符)
    *   [运算符优先级与结合性](#运算符优先级与结合性)
7.  [控制流：程序执行的指挥棒](#7-控制流语句)
    *   [`if-else if-else` 条件判断](#if-else-if-else-条件判断)
    *   [`switch` 多分支选择](#switch-多分支选择)
    *   [`for` 循环：固定次数迭代](#for-循环固定次数迭代)
    *   [`while` 循环：条件满足则执行](#while-循环条件满足则执行)
    *   [`do-while` 循环：至少执行一次](#do-while-循环至少执行一次)
    *   [`break` 与 `continue`：循环控制](#break-与-continue循环控制)
    *   [`goto` 语句：谨慎使用](#goto-语句谨慎使用)
8.  [数组与字符串：有序数据集合](#8-数组与字符串)
    *   [数组：同类型元素的集合](#数组同类型元素的集合)
    *   [多维数组](#多维数组)
    *   [字符串：特殊的字符数组](#字符串特殊的字符数组)
    *   [字符串库函数](#字符串库函数)
9.  [函数：模块化编程的基石](#9-函数)
    *   [函数声明 (原型)](#函数声明-原型)
    *   [函数定义](#函数定义)
    *   [函数调用](#函数调用)
    *   [参数传递：值传递与地址传递](#参数传递值传递与地址传递)
    *   [`void` 类型](#void-类型)
    *   [递归函数](#递归函数)
10. [指针：C语言的灵魂与挑战](#10-指针)
    *   [什么是指针？](#什么是指针)
    *   [声明指针变量](#声明指针变量)
    *   [取地址运算符 `&`](#取地址运算符-)
    *   [解引用运算符 `*`](#解引用运算符-)
    *   [指针与数组](#指针与数组)
    *   [指针与函数](#指针与函数)
    *   [空指针 (`NULL`)](#空指针-null)
    *   [野指针与悬空指针](#野指针与悬空指针)
    *   [多级指针](#多级指针)
11. [结构体：自定义数据类型](#11-结构体)
    *   [定义结构体](#定义结构体)
    *   [声明结构体变量](#声明结构体变量)
    *   [访问结构体成员](#访问结构体成员)
    *   [结构体数组](#结构体数组)
    *   [结构体与指针](#结构体与指针)
    *   [嵌套结构体](#嵌套结构体)
    *   [`typedef` 别名](#typedef-别名)
12. [联合体 (Unions)](#12-联合体-unions)
    *   [定义与使用](#定义与使用)
    *   [与结构体的区别](#与结构体的区别)
13. [枚举 (Enums)](#13-枚举-enums)
    *   [定义与使用](#定义与使用-1)
    *   [枚举的默认值](#枚举的默认值)
14. [动态内存管理](#14-动态内存管理)
    *   [`malloc()`：分配内存](#malloc分配内存)
    *   [`calloc()`：分配并清零](#calloc分配并清零)
    *   [`realloc()`：重新调整内存大小](#realloc重新调整内存大小)
    *   [`free()`：释放内存](#free释放内存)
    *   [内存泄漏与悬空指针](#内存泄漏与悬空指针)
15. [文件输入/输出 (File I/O)](#15-文件输入输出-file-io)
    *   [打开文件 (`fopen()`)](#打开文件-fopen)
    *   [关闭文件 (`fclose()`)](#关闭文件-fclose)
    *   [字符读写 (`fgetc()`, `fputc()`)](#字符读写-fgetc-fputc)
    *   [字符串读写 (`fgets()`, `fputs()`)](#字符串读写-fgets-fputs)
    *   [格式化读写 (`fscanf()`, `fprintf()`)](#格式化读写-fscanf-fprintf)
    *   [二进制读写 (`fread()`, `fwrite()`)](#二进制读写-fread-fwrite)
    *   [文件位置指示器 (`fseek()`, `ftell()`, `rewind()`)](#文件位置指示器-fseek-ftell-rewind)
---

## 1. C程序的基本结构

C程序如同一个精密的机器，每个部分都有其特定的功能和位置。理解其基本结构是编写任何C程序的第一步。

```c
// 1. 预处理器指令 (Preprocessor Directive)
#include <stdio.h> // 引入标准输入/输出库，提供如printf等函数

// 2. 全局变量声明 (Global Variable Declaration - 可选)
// int globalVar = 10;

// 3. 函数原型声明 (Function Prototypes - 可选，若函数定义在main之后则需要)
// void greetUser(char* name);

// 4. main函数 - 程序的唯一入口点
// int 表示函数执行完毕后会返回一个整数给操作系统
// void 表示main函数不接受任何参数，或可写 int main(int argc, char *argv[])
int main(void) { 
    // 5. 局部变量声明 (Local Variable Declaration)
    int myNumber = 42; 
    const double PI = 3.14159; // 常量声明

    // 6. 可执行语句 (Executable Statements)
    // printf是一个标准库函数，用于向控制台输出格式化文本
    printf("Hello, C Language!\n"); // \n 是换行符

    // 访问局部变量
    printf("My number is: %d\n", myNumber);
    printf("Value of PI: %lf\n", PI);

    // 7. 函数调用 (Function Call - 如果有其他函数)
    // greetUser("Alice");

    // 8. 返回语句 (Return Statement)
    // return 0; 通常表示程序成功执行并正常退出
    // 非0值通常表示程序执行过程中遇到了错误或异常
    return 0; 
}

// 9. 其他函数定义 (Other Function Definitions - 可选)
/*
void greetUser(char* name) {
    printf("Hello, %s!\n", name);
}
*/
```

### 预处理器指令

*   **`#include <stdio.h>`**：这是一个预处理器指令。在编译的**预处理阶段**，它会指示编译器将指定头文件（`stdio.h`，Standard Input/Output Header）的内容复制粘贴到当前文件中。`stdio.h` 包含了标准输入输出函数的声明，如 `printf()`（打印输出）、`scanf()`（格式化输入）等。
*   **`#define`**：用于定义宏。

### main函数

*   **`int main(void)`**：`main` 函数是所有C程序的**唯一入口点**。当程序启动时，操作系统会调用 `main` 函数。
    *   `int`：表示 `main` 函数执行完毕后会返回一个整型值给操作系统，通常 `0` 表示程序成功执行，非零值表示执行失败或异常。
    *   `void`：表示 `main` 函数不接受任何命令行参数。你也可以写成 `int main(int argc, char *argv[])` 来接收命令行参数。

### 代码块

*   **`{ ... }`**：花括号用于定义一个**代码块**。它界定了一个函数、循环、条件语句或任何其他复合语句的范围。在C语言中，所有的执行语句都必须包含在某个代码块中。

### 语句终结符

*   **`;`**：分号是C语言中**语句的终结符**。每一条独立的执行语句都必须以分号结尾。忘记分号是初学者常见的错误。

## 2. 注释的艺术

注释是代码的说明书，它们对于代码的可读性和维护性至关重要。编译器会完全忽略注释。

*   **单行注释**: `// 这是一行注释，从双斜杠开始到行尾结束。`
    *   **用途**: 简短的行内解释，或注释掉某一行代码。
    *   **示例**:
        ```c
        int count = 0; // 初始化计数器为0
        // printf("Debug: count = %d\n", count); // 临时注释掉的调试语句
        ```

*   **多行注释 (块注释)**: `/* 这是一个可以跨越多行， 用于更详细说明的代码块或算法 */`
    *   **用途**: 用于描述复杂的算法、函数、文件顶部版权信息或暂时禁用一个大的代码块。
    *   **示例**:
        ```c
        /*
         * 函数名称: calculateSum
         * 功能描述: 计算两个整数的和
         * 参数:
         *   a - 第一个整数
         *   b - 第二个整数
         * 返回值:
         *   两个整数的和
         */
        int calculateSum(int a, int b) {
            return a + b;
        }
        ```
    *   **注意**: 多行注释不能嵌套，即在一个 `/* ... */` 内部不能再有 `/* ... */`。

**最佳实践**:
*   **写清晰的代码**: 好的代码本身就是一种注释。
*   **注释“为什么”而不是“是什么”**: 解释代码背后的逻辑和意图，而不是简单地重复代码的功能。
*   **保持注释更新**: 代码修改时，注释也要同步更新，否则误导性注释比没有注释更糟糕。
*   **避免冗余注释**: `int x; // 声明一个整数x` 这样的注释是无意义的。

## 3. 变量：数据的容器

变量是程序中用于存储数据的命名存储区域。在使用变量之前，必须先声明它。

### 声明与赋值

*   **声明 (Declaration)**：告诉编译器变量的名称和它将存储的数据类型。
    **语法**: `数据类型 变量名;`
    ```c
    int age;         // 声明一个整型变量 age
    double salary;   // 声明一个双精度浮点型变量 salary
    char initial;    // 声明一个字符型变量 initial
    ```
    **注意**: 变量声明通常发生在函数或代码块的开头，但在C99标准后，可以在需要时声明。

*   **赋值 (Assignment)**：将一个值存储到已声明的变量中。
    **语法**: `变量名 = 值;`
    ```c
    age = 30;           // 将整数值 30 赋给 age
    salary = 5500.50;   // 将浮点数值 5500.50 赋给 salary
    initial = 'J';      // 将字符 'J' 赋给 initial (注意是单引号)
    ```

*   **声明并初始化 (Initialization)**：在声明变量的同时赋给它一个初始值。这是一个好习惯，可以避免使用未初始化变量导致的错误。
    **语法**: `数据类型 变量名 = 初始值;`
    ```c
    int count = 0;                  // 声明并初始化一个整型变量 count 为 0
    float temperature = 25.5f;      // 声明并初始化一个单精度浮点型变量 temperature
    char grade = 'B';               // 声明并初始化一个字符变量 grade

    // 可以在一行声明并初始化多个同类型变量
    int x = 10, y = 20, z = 30;
    ```

### 命名规则与最佳实践

*   **只能包含**: 字母 (a-z, A-Z)、数字 (0-9) 和下划线 (`_`)。
*   **不能以数字开头**。
*   **不能是C语言的关键字** (如 `int`, `for`, `while` 等)。
*   **区分大小写**: `age` 和 `Age` 是两个不同的变量。
*   **长度没有严格限制**: 但过长会降低可读性。
*   **有意义的名称**: 变量名应清晰地表达其用途，例如 `studentAge` 优于 `sa`。
*   **命名风格**:
    *   **驼峰命名法 (CamelCase)**: `firstName`, `totalAmount` (推荐用于变量和函数)。
    *   **下划线命名法 (Snake_Case)**: `first_name`, `total_amount` (在C语言中也很常见)。

## 4. 常量：不变的价值

常量是在程序执行期间其值不能改变的固定值。它们可以提高代码的可读性和维护性。

### `const` 关键字

*   `const` 关键字用于声明常量，它告诉编译器，这个变量的值是“只读”的，一旦初始化后就不能再修改。
*   **语法**: `const 数据类型 变量名 = 值;`
    ```c
    const double PI = 3.1415926535; // 声明一个双精度浮点型常量 PI
    const int MAX_ATTEMPTS = 3;     // 声明一个整型常量 MAX_ATTEMPTS

    // PI = 3.14; // 这行代码会导致编译错误，因为 PI 是一个常量
    ```
*   **优点**: `const` 常量有数据类型，编译器可以进行类型检查，比 `#define` 更安全。
*   **位置**: 可以在函数内部（局部常量）或函数外部（全局常量）定义。

### `#define` 预处理器指令

*   `#define` 是一个预处理器指令，用于定义**宏常量**。在预处理阶段，所有出现的宏名称都会被其定义的值替换。
*   **语法**: `#define 宏名称 值` (注意，末尾**没有分号**)
    ```c
    #define MAX_USERS 100         // 定义一个宏常量 MAX_USERS
    #define GREETING "Hello World" // 定义一个字符串宏常量

    int main() {
        int users = MAX_USERS; // MAX_USERS 会被替换为 100
        printf("%s\n", GREETING); // GREETING 会被替换为 "Hello World"
        return 0;
    }
    ```
*   **优点**: 简单，可以在不声明变量的情况下定义常量。
*   **缺点**:
    *   **没有类型检查**: 预处理器只进行文本替换，不关心类型。
    *   **作用域**: 默认情况下作用于整个文件，可能导致命名冲突。
    *   **调试困难**: 宏在预处理阶段就被替换，调试器可能看不到宏名称。
*   **建议**: 现代C编程更推荐使用 `const` 关键字来定义常量，除非你需要宏的其他特性（如宏函数）。

## 5. 基本数据类型详解

C语言提供了多种基本数据类型来处理不同种类的数据。

| 类型      | 说明                                        | 内存大小 (典型) | 取值范围 (典型)                     | 格式占位符 |
| :-------- | :------------------------------------------ | :-------------- | :---------------------------------- | :--------- |
| **`char`** | 单个字符，也可用作小范围整数              | 1 字节          | -128 到 127 或 0 到 255             | `%c`       |
| **`int`** | 整型，最常用的整数类型                      | 2 或 4 字节     | -32,768 到 32,767 (2字节)           | `%d` / `%i` |
|           |                                             |                 | -2,147,483,648 到 2,147,483,647 (4字节) |            |
| **`short`** | 短整型，至少16位                          | 2 字节          | -32,768 到 32,767                   | `%hd`      |
| **`long`**| 长整型，至少32位                          | 4 或 8 字节     | -2,147,483,648 到 2,147,483,647 (4字节) | `%ld`      |
|           |                                             |                 | 更大范围 (8字节)                    |            |
| **`long long`**| 超长整型，至少64位                      | 8 字节          | 大约 ±9 x 10^18                     | `%lld`     |
| **`float`** | 单精度浮点数                              | 4 字节          | 大约 ±3.4 x 10^-38 到 ±3.4 x 10^38   | `%f`       |
| **`double`**| 双精度浮点数，默认浮点类型                | 8 字节          | 大约 ±1.7 x 10^-308 到 ±1.7 x 10^308 | `%lf`      |
| **`long double`**| 扩展精度浮点数                          | 10 或 16 字节   | 更大或更高精度                      | `%Lf`      |
| **`_Bool`** | 布尔类型 (C99标准引入)                    | 1 字节          | `true` (1) 或 `false` (0)           | `%d`       |

### 整型 (`int`, `short`, `long`, `long long`)

*   **`int`**: 整数类型，其确切大小取决于系统架构，但通常为 4 字节（32位）。是使用最广泛的整型。
    *   **字面量**: `10`, `-500`, `0`
    *   **格式占位符**: `%d` 或 `%i`
*   **`short`**: 短整型，至少保证 2 字节。用于节省内存或明确表示较小范围的整数。
    *   **格式占位符**: `%hd`
*   **`long`**: 长整型，至少保证 4 字节。在某些系统上可能与 `int` 相同，在另一些系统上可能为 8 字节。
    *   **字面量**: `100L`, `-2000000000L` (后缀 `L` 或 `l` 表示长整型)
    *   **格式占位符**: `%ld`
*   **`long long`**: C99 标准引入，超长整型，至少保证 8 字节。用于需要极大整数值的场景。
    *   **字面量**: `100LL`, `-9000000000000000000LL` (后缀 `LL` 或 `ll` 表示超长整型)
    *   **格式占位符**: `%lld`

### 浮点型 (`float`, `double`, `long double`)

用于表示小数。

*   **`float`**: 单精度浮点数，通常 4 字节。精度较低，适用于对精度要求不高的场景。
    *   **字面量**: `3.14f`, `-0.5f`, `1.23e-5f` (后缀 `f` 或 `F` 表示单精度)
    *   **格式占位符**: `%f` (默认输出6位小数，可 `%e` 科学计数法，`%g` 自动选择)
*   **`double`**: 双精度浮点数，通常 8 字节。C语言中默认的浮点字面量就是 `double` 类型。精度较高，通常推荐使用。
    *   **字面量**: `3.1415926`, `-0.5`, `1.23e-5`
    *   **格式占位符**: `%lf` (用于 `scanf` 输入) 和 `%f` (用于 `printf` 输出)。注意这里 `printf` 的 `%f` 可以同时处理 `float` 和 `double`，但 `scanf` 必须区分。
*   **`long double`**: 扩展精度浮点数，通常 10 或 16 字节。提供更高的精度，但并非所有系统都支持或利用其全部精度。
    *   **字面量**: `3.141592653589793L` (后缀 `L` 或 `l` 表示长双精度)
    *   **格式占位符**: `%Lf`

### 字符型 (`char`)

*   **`char`**: 用于存储单个字符。在内存中，字符实际上是以其ASCII码（或Unicode等编码）的整数形式存储的。因此，`char` 也可以被视为一个 1 字节的整数类型。
    *   **字面量**: `'A'`, `'z'`, `'5'`, `'$'` (使用**单引号**)
    *   **格式占位符**: `%c` (字符形式), `%d` (整数ASCII码形式)
    *   **示例**:
        ```c
        char myChar = 'X';
        printf("Character: %c, ASCII value: %d\n", myChar, myChar); // Output: Character: X, ASCII value: 88
        ```

### 布尔类型 (`_Bool`)

*   **`_Bool`**: C99 标准引入的布尔类型。它只能存储 `0` (假) 或 `1` (真)。
    *   为了方便，通常会 `#include <stdbool.h>`，然后可以使用 `bool` 替换 `_Bool`，`true` 替换 `1`，`false` 替换 `0`。
    *   **格式占位符**: `%d` (输出 `0` 或 `1`)
    *   **示例**:
        ```c
        #include <stdbool.h> // 使用 bool, true, false
        // 或者不包含，直接使用 _Bool
        // _Bool is_active = 1;

        bool is_active = true;
        if (is_active) {
            printf("System is active.\n"); // 输出 System is active.
        }
        ```

### 无符号类型 (`unsigned`)

*   可以与 `char`, `short`, `int`, `long`, `long long` 结合使用，表示这些类型只能存储非负数（0 及正数）。
*   **作用**: 将最高位从符号位变为数值位，从而将正数存储范围扩大一倍。
    *   **示例**:
        ```c
        unsigned int u_age = 50; // 只能存储 0 及正数
        // unsigned int u_negative_age = -10; // 编译会警告，赋值后会变成一个非常大的正数

        // 格式占位符:
        // unsigned int: %u
        // unsigned short: %hu
        // unsigned long: %lu
        // unsigned long long: %llu
        ```

### 数据类型选择建议

*   **整数**: 优先使用 `int`。如果知道范围非常小，可以用 `short` 节省内存（但在现代系统上通常差异不大）。如果需要非常大的整数，使用 `long` 或 `long long`。
*   **浮点数**: 优先使用 `double`，因为它提供更高的精度，且是字面量的默认类型。除非内存极其受限或确实只需要低精度，否则避免使用 `float`。
*   **字符**: 使用 `char`。
*   **布尔**: 使用 `_Bool` 或通过 `<stdbool.h>` 使用 `bool`。
*   **无符号**: 仅当确定变量不会是负数且需要扩展正数范围时使用，例如计数、ID等。

## 6. C语言运算符全览

运算符是用于执行特定操作的符号，例如数学运算、比较、逻辑判断等。

### 算术运算符

用于数学计算。
*   `+` (加)
*   `-` (减)
*   `*` (乘)
*   `/` (除)
    *   **整数除法**: 如果两个操作数都是整数，结果也会是整数（小数部分被截断）。
        ```c
        int result = 10 / 3; // result 是 3
        float f_result = 10.0f / 3; // f_result 是 3.333333
        ```
*   `%` (取模/求余数)
    *   仅适用于整数类型。
    *   结果的符号与被除数相同。
    ```c
    int remainder1 = 10 % 3;  // 结果是 1
    int remainder2 = -10 % 3; // 结果是 -1
    int remainder3 = 10 % -3; // 结果是 1
    ```

### 关系运算符

用于比较两个值，结果是布尔值 (`1` 为真，`0` 为假)。
*   `==` (等于)
*   `!=` (不等于)
*   `>` (大于)
*   `<` (小于)
*   `>=` (大于等于)
*   `<=` (小于等于)
    ```c
    int a = 5, b = 10;
    printf("%d\n", a == b); // 0 (假)
    printf("%d\n", a < b);  // 1 (真)
    ```

### 逻辑运算符

用于组合或否定布尔表达式。
*   `&&` (逻辑与 AND): 如果两个操作数都为真 (非零)，则结果为真。
    *   **短路求值**: 如果第一个操作数为假，则不会评估第二个操作数。
*   `||` (逻辑或 OR): 如果任一操作数为真 (非零)，则结果为真。
    *   **短路求值**: 如果第一个操作数为真，则不会评估第二个操作数。
*   `!` (逻辑非 NOT): 反转操作数的真假值。
    ```c
    int age = 20;
    int hasLicense = 1; // 1代表真，0代表假

    if (age > 18 && hasLicense) { // age > 18 为真，hasLicense为真，所以整个条件为真
        printf("可以开车。\n");
    }

    if (!(age < 18)) { // age < 18 为假，!假 为真
        printf("已成年。\n");
    }
    ```

### 赋值运算符

用于将右侧的值赋给左侧的变量。
*   `=` (简单赋值)
*   `+=` (加赋值): `x += 5;` 等价于 `x = x + 5;`
*   `-=` (减赋值): `x -= 5;` 等价于 `x = x - 5;`
*   `*=` (乘赋值): `x *= 5;` 等价于 `x = x * 5;`
*   `/=` (除赋值): `x /= 5;` 等价于 `x = x / 5;`
*   `%=` (模赋值): `x %= 5;` 等价于 `x = x % 5;`
*   还有位运算符的复合赋值: `&=`, `|=`, `^=`, `<<=`, `>>=`

### 自增/自减运算符

用于将变量的值增加或减少 1。
*   `++` (自增)
*   `--` (自减)
*   **前置 (Prefix)**: `++i` 或 `--i`
    *   **先改变变量的值，再使用新值。**
    ```c
    int i = 5;
    int j = ++i; // i 变为 6，j 得到 6
    printf("i=%d, j=%d\n", i, j); // i=6, j=6
    ```
*   **后置 (Postfix)**: `i++` 或 `i--`
    *   **先使用变量的当前值，再改变变量的值。**
    ```c
    int i = 5;
    int j = i++; // j 得到 5，然后 i 变为 6
    printf("i=%d, j=%d\n", i, j); // i=6, j=5
    ```
    **注意**: 在复杂表达式中，前置和后置运算符的行为差异很大，理解这点至关重要。

### 位运算符

对整数在二进制位级别进行操作。常用于底层编程、硬件控制、数据加密等。
*   `&` (按位与 AND)
*   `|` (按位或 OR)
*   `^` (按位异或 XOR)
*   `~` (按位取反 NOT)
*   `<<` (左移): `x << n` 将 `x` 的二进制位左移 `n` 位，右侧空位补 `0`。等价于 `x * 2^n`。
*   `>>` (右移): `x >> n` 将 `x` 的二进制位右移 `n` 位。
    *   **无符号数**: 左侧空位补 `0` (逻辑右移)。
    *   **有符号数**: 左侧空位补 `0` 或补符号位（算术右移），取决于编译器实现。通常是算术右移。
    ```c
    int a = 5; // 二进制: 0000 0101
    int b = 3; // 二进制: 0000 0011

    printf("a & b = %d\n", a & b); // 1 (0000 0001)
    printf("a | b = %d\n", a | b); // 7 (0000 0111)
    printf("a ^ b = %d\n", a ^ b); // 6 (0000 0110)
    printf("~a = %d\n", ~a);       // -6 (补码表示)
    printf("a << 1 = %d\n", a << 1); // 10 (0000 1010)
    printf("a >> 1 = %d\n", a >> 1); // 2 (0000 0010)
    ```

### `sizeof` 运算符

*   `sizeof` 运算符用于计算变量或数据类型在内存中占用的字节数。
*   **语法**: `sizeof(变量名)` 或 `sizeof(数据类型)`
*   **返回类型**: `size_t` (一个无符号整数类型)。打印时推荐使用 `%zu` 格式占位符。
    ```c
    int num;
    double d_val;
    char my_array[10];

    printf("Size of int: %zu bytes\n", sizeof(int));
    printf("Size of num: %zu bytes\n", sizeof(num));
    printf("Size of double: %zu bytes\n", sizeof(double));
    printf("Size of d_val: %zu bytes\n", sizeof(d_val));
    printf("Size of char array: %zu bytes\n", sizeof(my_array)); // 10 bytes
    ```

### 运算符优先级与结合性

*   当一个表达式包含多个运算符时，它们的执行顺序由**优先级**决定。优先级高的先执行。
*   当两个运算符优先级相同时，它们的执行顺序由**结合性**决定（从左到右或从右到左）。
*   **最高优先级**: `()` (圆括号，可以改变默认优先级)
*   **较高优先级**: `*`, `/`, `%` (乘除模)
*   **中等优先级**: `+`, `-` (加减)
*   **较低优先级**: 关系运算符，逻辑运算符
*   **最低优先级**: 赋值运算符
*   **通常建议使用圆括号 `()` 来明确指定运算顺序，提高代码的可读性，即使你知道优先级。**

## 7. 控制流：程序执行的指挥棒

控制流语句决定了程序中指令的执行顺序。它们允许程序根据条件做出决策或重复执行代码。

### `if-else if-else` 条件判断

根据条件表达式的真假来决定执行哪段代码。

**语法**:
```c
if (条件表达式1) {
    // 如果条件表达式1为真 (非零)，执行这里的代码
} else if (条件表达式2) { // 可选的，可以有多个 else if
    // 如果条件表达式1为假，且条件表达式2为真，执行这里的代码
} else { // 可选的
    // 如果所有条件表达式都为假，执行这里的代码
}
```
*   **`if`**: 启动条件判断。
*   **`else if`**: 提供额外的条件分支。
*   **`else`**: 作为最后的“捕获所有”分支，当所有 `if` 和 `else if` 条件都为假时执行。
*   如果代码块中只有一条语句，可以省略花括号 `{}`，但不建议这样做，因为它容易引入错误。
    ```c
    int score = 85;
    if (score >= 90) {
        printf("优秀\n");
    } else if (score >= 80) {
        printf("良好\n");
    } else
    ```