# Areas_Of_Knowledge\Frameworks_And_Tools\Regex\Regular_Expressions_Handbook.md

# 正则表达式完全手册：从入门到精通

## 目录

- [Areas\_Of\_Knowledge\\Frameworks\_And\_Tools\\Regex\\Regular\_Expressions\_Handbook.md](#areas_of_knowledgeframeworks_and_toolsregexregular_expressions_handbookmd)
- [正则表达式完全手册：从入门到精通](#正则表达式完全手册从入门到精通)
  - [目录](#目录)
    - [**1. 正则表达式简介**](#1-正则表达式简介)
      - [**1.1 什么是正则表达式？**](#11-什么是正则表达式)
      - [**1.2 正则表达式的用途**](#12-正则表达式的用途)
    - [**2. 基础语法**](#2-基础语法)
      - [**2.1 字面量字符**](#21-字面量字符)
      - [**2.2 元字符**](#22-元字符)
      - [**2.3 字符集**](#23-字符集)
      - [**2.4 量词**](#24-量词)
      - [**2.5 贪婪与非贪婪匹配**](#25-贪婪与非贪婪匹配)
    - [**3. 高级概念**](#3-高级概念)
      - [**3.1 分组与捕获**](#31-分组与捕获)
      - [**3.2 断言（零宽断言）**](#32-断言零宽断言)
      - [**3.3 反向引用**](#33-反向引用)
      - [**3.4 修饰符**](#34-修饰符)
    - [**4. 实际应用案例**](#4-实际应用案例)
      - [**4.1 数据验证**](#41-数据验证)
      - [**4.2 数据提取**](#42-数据提取)
      - [**4.3 搜索与替换**](#43-搜索与替换)
    - [**5. 常用正则表达式备忘单**](#5-常用正则表达式备忘单)
    - [**6. 推荐工具与资源**](#6-推荐工具与资源)

---

### **1. 正则表达式简介**

#### **1.1 什么是正则表达式？**

正则表达式（Regular Expression，常简写为regex、regexp或RE）是一种强大的文本处理工具，它使用一种专门的语法来描述和匹配字符串中的字符组合模式。 简而言之，正则表达式是记录文本规则的代码。 例如，一个简单的正则表达式 `\d+` 可以匹配一个或多个数字。

#### **1.2 正则表达式的用途**

正则表达式在多种场景下都极为有用，主要包括：

*   **数据验证**：检查用户输入是否符合特定格式，如邮箱、电话号码、密码强度等。
*   **数据提取**：从大量非结构化文本中抽取特定信息，如日志文件分析、网页内容抓取等。
*   **搜索与替换**：在文本中查找并替换符合特定模式的字符串。

### **2. 基础语法**

#### **2.1 字面量字符**

正则表达式中最基本的是字面量字符，它们会精确匹配自身。例如，正则表达式 `hello` 会精确匹配字符串 "hello"。

#### **2.2 元字符**

元字符是在正则表达式中具有特殊含义的字符，它们不代表自身的字面意思，而是用于构建更复杂的匹配规则。 常见的元字符包括：

| 元字符 | 描述 | 示例 |
| --- | --- | --- |
| `.` | 匹配除换行符以外的任意单个字符。 | `b.t` 可以匹配 "bat", "b@t" 等。 |
| `\d` | 匹配任意一个数字，等同于 `[0-9]`。 | `\d{3}` 匹配一个三位数整数。 |
| `\D` | 匹配任意一个非数字字符，等同于 `[^0-9]`。 | `\D` 可以匹配 "a", "#" 等。 |
| `\w` | 匹配字母、数字或下划线。 | `\w+` 匹配一个或多个单词字符。 |
| `\W` | 匹配非字母、数字或下划线字符。 | `\W` 可以匹配 " ", "@" 等。 |
| `\s` | 匹配任意空白字符，包括空格、制表符、换行符等。 | ` ` |
| `\S` | 匹配任意非空白字符。 | ` ` |
| `^` | 匹配字符串的开头。 | `^start` 匹配以 "start" 开头的字符串。 |
| `$` | 匹配字符串的结尾。 | `end$` 匹配以 "end" 结尾的字符串。 |
| `\b` | 匹配单词边界。 | `\bword\b` 匹配独立的单词 "word"。 |
| `\B` | 匹配非单词边界。 | ` ` |

#### **2.3 字符集**

字符集（Character Sets）使用方括号 `[]` 定义，可以匹配方括号内列出的任意一个字符。

*   `[abc]`：匹配 "a", "b", "c" 中的任意一个字符。
*   `[a-z]`：匹配任意一个小写字母。
*   `[^abc]`：匹配除了 "a", "b", "c" 以外的任意字符（反向字符集）。

#### **2.4 量词**

量词（Quantifiers）用于指定一个模式出现的次数。

| 量词 | 描述 |
| --- | --- |
| `*` | 匹配前面的元素零次或多次。 |
| `+` | 匹配前面的元素一次或多次。 |
| `?` | 匹配前面的元素零次或一次。 |
| `{n}` | 匹配前面的元素恰好 n 次。 |
| `{n,}` | 匹配前面的元素至少 n 次。 |
| `{n,m}` | 匹配前面的元素至少 n 次，但不超过 m 次。 |

#### **2.5 贪婪与非贪婪匹配**

默认情况下，量词是“贪婪的”，意味着它们会尽可能多地匹配字符。 可以在量词后添加一个问号 `?` 来切换到“非贪婪”（或“懒惰”）模式，使其尽可能少地匹配。

*   **贪婪匹配**：`a.*b` 会从第一个 `a` 一直匹配到最后一个 `b`。
*   **非贪婪匹配**：`a.*?b` 在遇到第一个 `b` 后就会停止匹配。

### **3. 高级概念**

#### **3.1 分组与捕获**

使用圆括号 `()` 可以创建一个分组（Group），主要有以下作用：

*   **将多个字符视为一个单元**：可以对整个分组应用量词，如 `(abc)+` 匹配一个或多个 "abc"。
*   **创建捕获组**：分组会“捕获”其匹配到的文本，以便后续通过反向引用或在程序中提取。
*   **创建非捕获组**：使用 `(?:pattern)` 可以创建一个不捕获匹配内容的非捕获组，在只需要分组功能而不需要捕获时可以提高效率。

#### **3.2 断言（零宽断言）**

断言（Assertions）是一种特殊的结构，它们匹配的是一个位置，而不是具体的字符，因此被称为“零宽度”。 断言用于检查当前位置前后是否满足特定条件。

| 断言 | 名称 | 描述 |
| --- | --- | --- |
| `(?=pattern)` | 正向先行断言 | 要求当前位置后面的字符序列能够匹配 `pattern`。 |
| `(?!pattern)` | 负向先行断言 | 要求当前位置后面的字符序列不能匹配 `pattern`。 |
| `(?<=pattern)` | 正向后行断言 | 要求当前位置前面的字符序列能够匹配 `pattern`。 |
| `(?<!pattern)` | 负向后行断言 | 要求当前位置前面的字符序列不能匹配 `pattern`。 |

#### **3.3 反向引用**

反向引用允许在正则表达式的后面部分引用前面捕获组匹配到的内容。 可以通过 `\1`, `\2`, ... 或 `\k<name>`（对于命名捕获组）来引用。

**示例**：匹配重复的单词 `\b(\w+)\s+\1\b`。这里的 `\1` 就引用了第一个捕获组 `(\w+)` 匹配到的内容。

#### **3.4 修饰符**

修饰符（也称为标志）用于改变正则表达式的默认行为。 它们写在正则表达式之外。

| 修饰符 | 描述 |
| --- | --- |
| `i` | 忽略大小写匹配。 |
| `g` | 全局匹配，查找所有匹配项，而不是在找到第一个后停止。 |
| `m` | 多行匹配，使 `^` 和 `$` 能够匹配每一行的开头和结尾。 |
| `s` | 单行模式，使 `.` 也可以匹配换行符。 |

### **4. 实际应用案例**

#### **4.1 数据验证**

*   **验证邮箱地址**：`^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$`
*   **验证手机号码（中国大陆）**：`^1[3-9]\d{9}$`
*   **验证密码（示例：至少一个数字、一个字母、一个特殊字符，长度8-18位）**：`^(?=.*\d)(?=.*[a-zA-Z])(?=.*[\W_]).{8,18}$`

#### **4.2 数据提取**

*   **从HTML中提取链接**：`<a\s+(?:[^>]*?\s+)?href="([^"]*)"`
*   **提取日志中的IP地址**：`\b(?:\d{1,3}\.){3}\d{1,3}\b`

#### **4.3 搜索与替换**

*   **删除多余的空格**：将 `\s+` 替换为单个空格 ` `。
*   **格式化电话号码**：将 `(\d{3})(\d{4})(\d{4})` 替换为 `$1-$2-$3`。

### **5. 常用正则表达式备忘单**

| 需求 | 正则表达式 |
| --- | --- |
| 匹配中文字符 | `[\u4e00-\u9fa5]` |
| 匹配双字节字符 | `[^\x00-\xff]` |
| 匹配空白行 | `\n\s*\r` |
| 匹配HTML标签 | `<(\S*?)[^>]*>.*?</\1>|<.*? />` |
| 匹配首尾空白字符 | `^\s*|\s*$` |
| 匹配有效的URL | `^(https?|ftp)://[^\s/$.?#].[^\s]*$` |
| 匹配IPv4地址 | `\b(?:[0-9]{1,3}\.){3}[0-9]{1,3}\b` |

### **6. 推荐工具与资源**

*   **在线测试工具**：
    *   **Regex101**：功能强大，提供详细的匹配解释和调试功能。
    *   **RegExr**：界面友好，提供实时匹配和丰富的示例库。
*   **学习资源**：
    *   **MDN Web Docs (JavaScript)**：提供了详尽的JavaScript正则表达式指南。
    *   **《精通正则表达式》**：一本深入讲解正则表达式原理和技巧的经典书籍。