### 第一部分：核心基础项目 (The Foundation)

这是整个系统的基石，必须最先构建和稳定下来。

#### 项目 1: `PasswordManager-Backend-Core` (核心后端API)
*   **技术栈**: **Python** (使用 FastAPI 或 Django REST Framework)
*   **核心职责**:
    *   **用户账户系统**: 负责用户注册、登录、注销、密码重置等。
    *   **零知识存储**: 提供安全的 API 端点，用于对加密的密码库数据进行 CRUD (创建、读取、更新、删除) 操作。**服务器只存储加密数据，绝不接触明文**。
    *   **身份验证与授权**: 管理 API 访问令牌 (如 JWT)，确保只有授权用户能访问自己的数据。
    *   **数据库管理**: 定义和维护核心数据库结构（用户表、加密数据表等）。
*   **对应需求**: 支撑所有需要云同步的功能，是整个产品的后端骨架。

#### 项目 2: `PasswordManager-Frontend-SDK` (前端核心逻辑库)
*   **技术栈**: **Dart** (作为一个纯 Dart 包)
*   **核心职责**:
    *   **客户端加密引擎**: 实现完整的零知识加密/解密逻辑。包括主密码的密钥派生 (Argon2/PBKDF2)、数据加密/解密 (AES-256)。
    *   **API 客户端**: 封装所有与后端 API 的网络通信，处理请求、响应和错误。
    *   **本地数据库与状态管理**: 管理解密后在内存中的数据状态，并负责与本地安全数据库（如 Isar, Hive）交互，实现离线访问和缓存。
    *   **同步逻辑**: 处理本地数据与云端数据的同步、冲突解决等复杂逻辑。
*   **对应需求**: 这是所有前端应用的“大脑”，被下面的项目 3 和 4 依赖。

---

### 第二部分：客户端应用项目 (The User Interface)

这是用户直接交互的界面层。

#### 项目 3: `PasswordManager-App-Main` (主应用客户端)
*   **技术栈**: **Flutter**
*   **核心职责**:
    *   **多平台UI实现**: 构建适用于 Android, iOS, Windows, macOS, Linux 的所有用户界面和用户体验。
    *   **功能实现**:
        *   所有凭证的创建、查看、编辑、删除界面 (多类型凭证存储)。
        *   TOTP 验证码的生成与显示 (二次验证码管理)。
        *   强大的数据导入/导出工具界面 (数据导入)。
        *   安全仪表盘的可视化展示 (安全仪表盘)。
        *   所有个性化和趣味性功能 (主题、成就、推送等)。
        *   实现高阶安全功能的前端部分：旅行模式的UI、自毁模式的触发、伪装模式的界面切换。
    *   **依赖**: 依赖 **项目 2** 来处理所有核心逻辑。
*   **对应需求**: 基础核心功能、数据导入、安全仪表盘、个性化、以及多个高级安全功能的前端部分。

#### 项目 4: `PasswordManager-Browser-Extension` (浏览器扩展)
*   **技术栈**: **Flutter for Web**, 配合少量的 **JavaScript** (用于与浏览器原生API交互)。
*   **核心职责**:
    *   **插件UI**: 使用 Flutter 构建插件的弹出窗口 (Popup)、设置页面等。
    *   **自动填充/保存**: 通过 JS Content Scripts 与网页DOM交互，识别登录框并实现自动填充和保存。
    *   **与主应用通信**: 通过 Native Messaging 与已安装的桌面应用 (项目 3) 通信，以安全地调用核心加密功能，避免在浏览器中处理主密码。
    *   **Passkey 提供者**: 作为 Passkey 的前端接口，响应浏览器的 Passkey 请求。
    *   **依赖**: 同样依赖 **项目 2** 的逻辑，但其交互模式更复杂。
*   **对应需求**: 浏览器扩展支持、Passkey 支持的前端部分。

---

### 第三部分：独立后端微服务项目 (The Advanced Services)

这些是功能独立、可以解耦出来作为微服务的后端项目。它们都由核心后端 (项目 1) 进行调用或与之交互。

#### 项目 5: `PasswordManager-BreachWatch-Service` (暗网泄露监控服务)
*   **技术栈**: **Python**
*   **核心职责**:
    *   **对接第三方API**: 与数据泄露情报服务商 (如 Have I Been Pwned) 的 API 进行集成。
    *   **定时任务**: 定期、异步地检查用户账户（邮箱、用户名）是否出现在新的泄露事件中。
    *   **警报系统**: 如果发现泄露，通过推送通知或邮件向用户发送警报。
*   **对应需求**: 暗网泄露监控。

#### 项目 6: `PasswordManager-Icon-Fetcher-Service` (图标自动获取服务)
*   **技术栈**: **Python**
*   **核心职责**:
    *   接收一个网址作为输入。
    *   智能地抓取该网站最高质量的 Favicon 或 Logo。
    *   进行处理和缓存，并提供一个稳定的 API 供前端调用。
*   **对应需求**: 图标自动获取与自定义。

#### 项目 7: `PasswordManager-Sharing-Infrastructure` (安全共享与协作后端)
*   **技术栈**: **Python**
*   **核心职责**:
    *   **安全共享逻辑**: 管理基于非对称加密的共享邀请和密钥交换过程。
    *   **权限控制**: 在后端定义和执行共享权限（只读、可编辑、所有者）。
    *   **家庭/团队管理**: 处理多用户账户、成员邀请、共享密码库和统一账单逻辑。
*   **对应需求**: 安全共享、家庭与团队版。

#### 项目 8: `PasswordManager-Emergency-Access-Service` (紧急访问后端)
*   **技术栈**: **Python**
*   **核心职责**:
    *   **状态管理**: 管理紧急联系人的邀请、确认和等待期状态。
    *   **安全流程**: 设计并实现一个安全的、包含多重验证的流程，以允许紧急联系人在满足条件后获取访问权限。
    *   **通知系统**: 在整个流程的关键节点（如发起请求、等待期结束）向用户和联系人发送通知。
*   **对应需求**: 紧急访问。

#### 项目 9: `PasswordManager-MaskedEmail-Service` (邮件别名服务)
*   **技术栈**: **Python**
*   **核心职责**:
    *   **别名生成与管理**: 生成随机的邮件别名，并管理其与用户真实邮箱的转发关系。
    *   **邮件转发引擎**: 接收发往别名的邮件，并将其安全地转发给用户的真实邮箱。
    *   **(可选) API集成**: 或者，作为第三方邮件别名服务 (如 SimpleLogin) 的一个中间代理层。
*   **对应需求**: 邮件别名/掩码邮箱。

### 总结

| 项目编号 | 项目名称 | 技术栈 | 核心职责 | 对应PRD模块 |
| :--- | :--- | :--- | :--- | :--- |
| **1** | **Backend-Core** | Python | 用户系统 & 零知识数据存储 API | 支撑所有云功能 |
| **2** | **Frontend-SDK** | Dart | 客户端加密引擎 & API 通信 & 本地存储 | 支撑所有客户端功能 |
| **3** | **App-Main** | Flutter | 移动端 & 桌面端 UI 和交互 | 基础核心, 数据导入, UX |
| **4** | **Browser-Extension** | Flutter Web | 浏览器插件UI & 自动填充 | 基础核心 (浏览器支持) |
| **5** | **BreachWatch-Service** | Python | 暗网泄露监控 | 高级安全 |
| **6** | **Icon-Fetcher-Service**| Python | 网站图标自动获取 | 数据与互操作性 |
| **7** | **Sharing-Infrastructure**| Python | 安全共享 & 团队版后端逻辑 | 同步、共享与协作 |
| **8** | **Emergency-Access**| Python | 紧急访问后端逻辑 | 高级安全 |
| **9** | **MaskedEmail-Service**| Python | 邮件别名生成与转发 | 高级安全 |

通过这样的划分，您的项目结构将变得非常清晰，可以按优先级和依赖关系，分阶段、分团队进行开发。